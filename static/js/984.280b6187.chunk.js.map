{"version":3,"file":"static/js/984.280b6187.chunk.js","mappings":"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","sources":["pages/SweetsPages/Sweet.styled.js","pages/SweetsPages/Sweets.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const PageWrapper = styled.main`\r\n  background-color: ${({ theme }) => theme.colors.white};\r\n`;\r\n\r\nexport const StyledMain = styled.div`\r\n  padding-top: ${({ theme }) => theme.spacing(5)};\r\n  padding-bottom: ${({ theme }) => theme.spacing(7)};\r\n  @media screen and (min-width: 768px) {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: ${({ theme }) => theme.spacing(7)};\r\n  }\r\n`;\r\n\r\nexport const GoBackLink = styled(Link)`\r\n  display: flex;\r\n  padding-top: ${({ theme }) => theme.spacing(3)};\r\n  align-items: center;\r\n  gap: ${({ theme }) => theme.spacing(1)};\r\n  color: ${({ theme }) => theme.colors.light};\r\n`;\r\n\r\nexport const ImgWrapper = styled.div`\r\n  width: 250px;\r\n  height: 250px;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  @media screen and (min-width: 768px) {\r\n    width: 550px;\r\n    height: 550px;\r\n  }\r\n  img {\r\n    display: block;\r\n    height: 100%;\r\n    width: 100%;\r\n    object-fit: cover;\r\n  }\r\n`;\r\nexport const DescrWrapper = styled.div`\r\n  @media screen and (min-width: 768px) {\r\n    width: 450px;\r\n  }\r\n`;\r\n\r\nexport const StyledProductTitle = styled.h2`\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nexport const StyledP = styled.p`\r\n  margin-top: ${({ theme }) => theme.spacing(2)};\r\n  margin-bottom: ${({ theme }) => theme.spacing(2)};\r\n`;\r\n\r\nexport const MainContent = styled.div`\r\n  @media screen and (min-width: 768px) {\r\n    display: flex;\r\n    gap: ${({ theme }) => theme.spacing(7)};\r\n  }\r\n`;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../../firebase/config\";\r\nimport { MainContent,PageWrapper } from \"./Sweet.styled\";\r\nimport { ProductsList, Loader, Filter, Categories } from \"../../components\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport { Container } from \"../../components/SharedLayout/SharedLayout.styled\";\r\nconst SweetsPage = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [sweets, setSweets] = useState([]);\r\n  const [filter, setFiler] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(true); \r\n  const category = searchParams.get(\"category\") ?? \"chocolate\";\r\n  const sweetsCollectionRef = collection(db, \"sweets\");\r\n  useEffect(() => {\r\n    getDocs(sweetsCollectionRef)\r\n      .then((sweets) => {\r\n        const updateSweets = sweets.docs.map((candy) => ({\r\n          id: candy.id,\r\n          ...candy.data(),\r\n        }));\r\n        setSweets(updateSweets);\r\n      })\r\n\r\n      .catch((err) => toast.error(err.message))\r\n      .finally(setIsLoading(false));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const updateQueryString = (category) => {\r\n    const nextParams = category !== \"\" ? { category } : {};\r\n    setSearchParams(nextParams);\r\n  };\r\n\r\n  const onFilterClicked = (value) => { \r\n    setFiler(prev => { \r\n      if (prev === value) {        \r\n        console.log('this is second click');\r\n        return '';\r\n      } else { \r\n        console.log('this is first click');\r\n        return value;\r\n      }\r\n    })\r\n  }\r\n\r\n  const onFilteredSweets = () => {\r\n    const filteredSweets = [...sweets];\r\n    if (!filter) return sweets;    \r\n    if (filter === \"low-p\") {\r\n      filteredSweets.sort((a, b) => a.price - b.price);\r\n    }\r\n    if (filter === \"hight-p\") {\r\n      filteredSweets.sort((a, b) => b.price - a.price);\r\n    }\r\n    if (filter === \"low-r\") {\r\n      filteredSweets.sort((a, b) => a.scored - b.scored);\r\n    }\r\n    if (filter === \"hight-r\") {\r\n      filteredSweets.sort((a, b) => b.scored - a.scored);\r\n    }\r\n    return filteredSweets;\r\n  };\r\n  const onCategoryOfSweets = (arr) => {\r\n    if (!category) return arr;\r\n    return arr.filter((candy) => candy.category === category);\r\n  };\r\n\r\n  const sorted = onFilteredSweets();\r\n  const filtered = onCategoryOfSweets(sorted);\r\n  return (\r\n    <PageWrapper>\r\n      <Container>\r\n        {isLoading && <Loader />}\r\n        <Filter updateFiler={onFilterClicked} filter={ filter} />\r\n        <Categories setCategory={updateQueryString} urlParams={category} />\r\n        <MainContent>          \r\n          <ProductsList sweets={filtered} />\r\n        </MainContent>\r\n      </Container>\r\n    </PageWrapper>\r\n  );\r\n};\r\n\r\nexport default SweetsPage;\r\n"],"names":["PageWrapper","styled","_templateObject","_taggedTemplateLiteral","_ref","theme","colors","white","StyledMain","_templateObject2","_ref2","spacing","_ref3","_ref4","GoBackLink","Link","_templateObject3","_ref5","_ref6","_ref7","light","ImgWrapper","_templateObject4","DescrWrapper","_templateObject5","StyledProductTitle","_templateObject6","StyledP","_templateObject7","_ref8","_ref9","MainContent","_templateObject8","_ref10","_searchParams$get","_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","setSearchParams","_useState","useState","_useState2","sweets","setSweets","_useState3","_useState4","filter","setFiler","_useState5","_useState6","isLoading","setIsLoading","category","get","sweetsCollectionRef","collection","db","useEffect","getDocs","then","updateSweets","docs","map","candy","_objectSpread","id","data","catch","err","toast","message","finally","arr","sorted","filteredSweets","_toConsumableArray","sort","a","b","price","scored","onFilteredSweets","filtered","_jsx","children","_jsxs","Container","Loader","Filter","updateFiler","value","prev","console","log","Categories","setCategory","urlParams","ProductsList"],"sourceRoot":""}